<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='UTF-8'>
    <title> Friend Finder!</title>

    <!-- Bootstrap CDN & FontAwesome-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
</head>

<body>
    <!-- Modal -->
    <div class="modal fade" id="profileModal" tabindex="-1" role="dialog" aria-labelledby="profileModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Meet your new best friend!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-center">
                    <h1 class='best-name'></h1>
                </div>
                <div class="modal-body text-center best-photo">
                    <img src='' class='img-fluid'>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class='container'>
        <h1>Survey Questions</h1>
        <hr>
        <h2>About You</h2>
        <form>
            <div class="form-group">
                <label for="about-you">Your Name</label>
                <input type="name" class="form-control" id="username" placeholder="e.g. John Doe" required>
            </div>
            <div class="form-group">
                <label for="about-you">Your Email</label>
                <input type="email" class="form-control" id="email" placeholder="johndoe@gmail.com" required>
            </div>
            <div class="form-group">
                <label for="about-you">Your Picture</label>
                <input type="profile-pic" class="form-control" id="profilepic" placeholder="Please include a URL of your desired profile picture!"
                    required>
            </div>
            <div class="form-group">
                <label for="survey-questions">Do you like Jimmy Buffett?</label>
                <select class="form-control" id="question1">
                    <option value='1'>1 (Strongly Disagree)</option>
                    <option value='2'>2</option>
                    <option value='3' selected="selected">3</option>
                    <option value='4'>4</option>
                    <option value='5'>5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="survey-questions">Do you like Pi√±a coladas?</label>
                <select class="form-control" id="question2">
                    <option value='1'>1 (Strongly Disagree)</option>
                    <option value='2'>2</option>
                    <option value='3' selected="selected">3</option>
                    <option value='4'>4</option>
                    <option value='5'>5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="survey-questions">Do you like getting caught in the rain?</label>
                <select class="form-control" id="question3">
                    <option value='1'>1 (Strongly Disagree)</option>
                    <option value='2'>2</option>
                    <option value='3' selected="selected">3</option>
                    <option value='4'>4</option>
                    <option value='5'>5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="survey-questions">Are you into yoga?</label>
                <select class="form-control" id="question4">
                    <option value='1'>1 (Strongly Disagree)</option>
                    <option value='2'>2</option>
                    <option value='3' selected="selected">3</option>
                    <option value='4'>4</option>
                    <option value='5'>5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="survey-questions">Do you have half a brain?</label>
                <select class="form-control" id="question5">
                    <option value='1'>1 (Strongly Disagree)</option>
                    <option value='2'>2</option>
                    <option value='3' selected="selected">3</option>
                    <option value='4'>4</option>
                    <option value='5'>5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="survey-questions">Do you like making love at midnight, in the dunes of a cape?</label>
                <select class="form-control" id="question6">
                    <option value='1'>1 (Strongly Disagree)</option>
                    <option value='2'>2</option>
                    <option value='3' selected="selected">3</option>
                    <option value='4'>4</option>
                    <option value='5'>5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="survey-questions">Are you much into health food?</label>
                <select class="form-control" id="question7">
                    <option value='1'>1 (Strongly Disagree)</option>
                    <option value='2'>2</option>
                    <option value='3' selected="selected">3</option>
                    <option value='4'>4</option>
                    <option value='5'>5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="survey-questions">Do you like the feel of the ocean?</label>
                <select class="form-control" id="question8">
                    <option value='1'>1 (Strongly Disagree)</option>
                    <option value='2'>2</option>
                    <option value='3' selected="selected">3</option>
                    <option value='4'>4</option>
                    <option value='5'>5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="survey-questions">Are you into champagne?</label>
                <select class="form-control" id="question9">
                    <option value='1'>1 (Strongly Disagree)</option>
                    <option value='2'>2</option>
                    <option value='3' selected="selected">3</option>
                    <option value='4'>4</option>
                    <option value='5'>5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="survey-questions">I am ready to plan an escape.</label>
                <select class="form-control" id="question10">
                    <option value='1'>1 (Strongly Disagree)</option>
                    <option value='2'>2</option>
                    <option value='3' selected="selected">3</option>
                    <option value='4'>4</option>
                    <option value='5'>5 (Strongly Agree)</option>
                </select>
            </div>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary submit-modal" data-toggle="modal" data-target="#profileModal">
                Submit
            </button>
        </form>
        <footer class="footer">
            <div class="container">
                <p>
                    <a href="/api/friends">API Friends Link</a> |
                    <a href="https://github.com/klanza/FriendFinder">GitHub Repo</a>
                </p>
            </div>
        </footer>
    </div>
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <script type='text/javascript'>
    // Absolutely no idea why, but this is necessary to prevent jQuery from posting 'scores' key/value pair
    // as 'scores[]:'. Due to jQuery serialization http://api.jquery.com/jQuery.param/#entry-longdesc
    if (typeof jQuery !== 'undefined') {
        jQuery.ajaxSettings.traditional = true;
        }
        $('.submit-modal').on('click', function (event) {
            event.preventDefault();
            // Form element information
            let answerArray = []
            // answerArray.push($('#question1').val())
            // answerArray.push($('#question2').val())
            // answerArray.push($('#question3').val())
            // answerArray.push($('#question4').val())
            // answerArray.push($('#question5').val())
            // answerArray.push($('#question6').val())
            // answerArray.push($('#question7').val())
            // answerArray.push($('#question8').val())
            // answerArray.push($('#question9').val())
            // answerArray.push($('#question10').val());
            answerArray.push(parseInt($('#question1').val()))
            answerArray.push(parseInt($('#question2').val()))
            answerArray.push(parseInt($('#question3').val()))
            answerArray.push(parseInt($('#question4').val()))
            answerArray.push(parseInt($('#question5').val()))
            answerArray.push(parseInt($('#question6').val()))
            answerArray.push(parseInt($('#question7').val()))
            answerArray.push(parseInt($('#question8').val()))
            answerArray.push(parseInt($('#question9').val()))
            answerArray.push(parseInt($('#question10').val()))
            console.log(answerArray)
        
            let profile = {
                name: $('#username').val().trim(),
                photo: $('#profilepic').val().trim(),
                scores: answerArray
            }
            // console.log(profile)
            $.post('/api/friends', profile, function (response) {
                traditional: true
                $('.best-name').text(response.name);
                $('best-photo').attr('src', response.photo)
                console.log(response);
            });
        })

    </script>

</body>

</html>